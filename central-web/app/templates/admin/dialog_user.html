{% import "forms.html" as forms %}
<div id="user-dialog" class="modal" data-backdrop="static">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<a href="#" role="button" class="close cancel" aria-label="Close"><span aria-hidden="true">&times;</span></a>
				<h4 class="modal-title" data-bind="text: isNew() ? 'New User' : 'Edit User'"></h4>
			</div>
			<div class="modal-body">
				<form class="form" id="user_form" role="form">
					{{ forms.global_errors() }}
					{{ forms.input('username', 'User Name', prefix = 'user_', required = 'required') }}
					<!-- ko if: isNew -->
					{{ forms.input('password', 'Password', prefix = 'user_', type = 'password', required = 'required') }}
					<!-- /ko -->
					{{ forms.input('fullname', 'Full Name', prefix = 'user_', required = 'required') }}
					{{ forms.select('role', 'Role', 'allRoles', prefix = 'user_') }}
				</form>
			</div>
			<div class="modal-footer">
				<a href="#" role="button" class="btn btn-default cancel">Cancel</a>
				<!-- ko if: isNew -->
				<button	type="button" role="button" class="btn btn-primary" id="user_submit" 
						data-bind="click: saveNewUser, enable: dirtyFlag.isDirty">Create User</button>
				<!-- /ko -->
				<!-- ko ifnot: isNew -->
				<button	type="button" role="button" class="btn btn-primary" id="user_submit" 
						data-bind="click: saveUser, enable: dirtyFlag.isDirty">Save User</button>
				<!-- /ko -->
			</div>
		</div>
	</div>
</div>
