{% extends "bootstrap/base.html" %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('static', filename='style.css')}}">
<link rel="stylesheet" href="{{url_for('static', filename='auth/home.css')}}">
{% endblock %}

{% block title %}Boulemix{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript" src="{{ url_for('static', filename='common/knockout-3.3.0.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='common/moment.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='common/viewmodel-utils.js') }}"></script>

<script type="text/javascript" src="{{ url_for('static', filename='common/sprintf.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='common/errors.js') }}"></script>
{% if current_user.is_authenticated() %}
<script type="text/javascript" src="{{ url_for('static', filename='common/Profile.js') }}"></script>
{% endif %}
{% endblock %}

{% block navbar %}
<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <span id="nav_agenda" class="navbar-brand" href="#">Boulemix</span>
        </div>
        <div class="navbar-collapse collapse" id="main-navbar">
			{% if current_user.is_authenticated() %}
			<ul class="nav navbar-nav navbar-left">
				{% if current_user.is_configurator() %}
				<li><a id="nav_configure" href="{{ url_for('configure.home')}}">Configure</a></li>
				{% endif %}
				<li><a id="nav_monitor" href="{{ url_for('monitor.home')}}">Monitor</a></li>
			</ul>
			{% endif %}
			{# Add more labels (and actions?) depending on current page (used eg for monitoring UI) #}
			{% block navbar_left_supplement %}{% endblock %}
			<ul class="nav navbar-nav navbar-right">
				{% if current_user.is_authenticated() %}
				<li class="dropdown">
				    <a id="nav_username" href="#" class="dropdown-toggle" data-toggle="dropdown"><span>{{ current_user.username }}</span> <b class="caret"></b></a>
				    <ul class="dropdown-menu">
				    	{% if current_user.is_admin() %}
				        <li><a id="nav_allusers" href="{{ url_for('admin.users') }}">All users</a></li>
				        {% endif %}
				        <li><a id="nav_myprofile" href="#">My Profile</a></li>
				        <li><a id="nav_mypassword" href="#">Modify My Password</a></li>
				        <li><a id="nav_logout" href="{{ url_for('auth.logout') }}">Logout</a></li>
				    </ul>
				</li>
				{% else %}
	            <li><a id="nav_username" class="not-connected" href="#">Not connected</a></li>
	            {% endif %}
			</ul>
        </div>
    </div>
</div>
{% endblock %}

{% block content %}
<input type="hidden" id="current-user" value="{{ current_user.id }}">
<div id="modal-content">
{% if current_user.is_authenticated() %}
	{% include "auth/dialog_profile.html" %}
	{% include "auth/dialog_password.html" %}
{% endif %}
	{% block modal_content %}{% endblock %}
</div>
<div class="container">
	{% block messages %}
	<div id="flash-messages">
	    {% for category, message in get_flashed_messages(with_categories = True) %}
	    	{% include "flash_messages.html" %}
	    {% endfor %}
    </div>
	{% endblock %}
    {% block page_content %}{% endblock %}
</div>
{% endblock %}
